---
sidebar_title: User events
page_title: BBPS Billpay user events
order: 3
visible_in_sidebar: true
---

## User events

A webhook can be configured to listen to users’ events and log them for analytics and re-engagement purposes.

<Callout type="tip">
  This feature is opt-in and is configured only when a partner requests for it
  to be enabled. This supports use cases like getting real-time payment status
  and related details after bill payment is done by customer.
</Callout>

<br/>

<hr class="primary" />

### Pre-requisites

You need to do the following to configure a Setu provided webhook—

1. Share the webhook URL. A URL that can accept `JSON` data over `POST`.
2. API Key _(optional)_—It can also be generated by Setu, for you.
3. Take steps to handle the notification

<hr class="tertiary" />

##### Share the webhook URL

This step requires setting up and sharing a webhook URL to Setu which is capable of receiving the transaction notifications. The URL to setup this webhook must be shared with Setu via email to <a href="">billpay.support@setu.co</a>.

<hr class="tertiary" />

##### Handle the notification

The notification consists of body an authentication header as well as a body/payload. The authentication header will be sent as `X-BILL-WEBHOOK-API-KEY`. The value for the same shall be communicated over email.

<hr class="primary" />

### List of notifications

The following events are supported in the bill payment journey—

- `bill_fetch_success`
- `bill_fetch_failure`
- `bill_payment_success`
- `bill_payment_failure`
- `bill_collection_failure`
- `bill_payment_refunded`
- `dispute_raised`
- `dispute_status_change`


Below are the parameter tables and sample payloads for the listed events. Note that we may add additional parameters at a later stage. However, we will ensure backwards compatibility and no keys will be removed.

<br/>

<Callout type="warning">
  All the values in the response payload are strings
</Callout>

<br/>
<br/>

`bill_fetch_success`

##### Parameters table

| Parameter       | Description                                                                                                                      | Example                                             | Data Type       |
| --------------- | -------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------- | --------------- |
| mobileNumber    | Mobile number used to generate the bill-fetch request                                                                            | 9481773053                                          | String (Number) |
| status          | Status of the bill-fetch request                                                                                                 | FETCH_SUCCESS                                       | String          |
| billId          | Unique identifier for the bill. It is generated by the biller. Also called as billNumber. Not applicable where there is no bill. | 490a8940-886e-45ed-bfd1-21dbed064373                | String          |
| billerId        | Unique identifier (Biller ID in BBPS) allocated to the Biller                                                                    | MAHI00000NATIC                                      | String          |
| billerName      | Name of the biller as registered with BBPS                                                                                       | Mahindra Rural Housing Finance Ltd                  | String          |
| billerCategory  | Category of the biller as registered with BBPS. There are more than 25 biller categories.                                        | Loan-Repayment; Electricity; Landline-Postpaid etc. | String          |
| billAmount      | Amount of the bill in rupees (INR)                                                                                               | 101.55                                              | String (Number) |
| dueDate         | Due date of the bill. Format is YYYY-MM-DD.                                                                                      |                                                     | String (Date)   |
| sessionId       | Unique identifier for the session used for this request                                                                          | 7f6de02a-0061-403f-bd65-47d4b5f72c87                | String          |
| event           | Name of the event to identify this user event                                                                                    | bill_fetch_success                                  | String          |
| additionalInfo  | Additional info available to Agent Institutions basis the additional info passed by the biller.                                  | [{name:"example", value: "abc"}]                    | String          |

<br/>

##### Sample payload

<CodeBlockWithCopy language="json">
  {`{
  "mobileNumber": "9481773053",
  "status": "FETCH_SUCCESS",
  "billId": "490a8940-886e-45ed-bfd1-21dbed064373",
  "billerId": "MAHI00000NATIC",
  "billerName": "Mahindra Rural Housing Finance Ltd",
  "billerCategory": "Loan-Repayment",
  "billAmount": "101.0",
  "dueDate": "2021-05-23",
  "sessionId": "7f6de02a-0061-403f-bd65-47d4b5f72c87",
  "event": "bill_fetch_success",
  "additionalInfo": [
    {
      "name":"example",
      "value":"ABC"
    }
  ]
}`}
</CodeBlockWithCopy>

<hr class="primary" />

`bill_fetch_failure`

##### Parameters table

| Parameter       | Description                                                                                                                      | Example                              | Data Type       |
| --------------- | -------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------ | --------------- |
| mobileNumber:   | Mobile number used to generate the bill-fetch request                                                                            | 9481773053                           | String (Number) |
| status:         | Status of the bill-fetch request                                                                                                 | FETCH_FAILURE                        | String          |
| billId:         | Unique identifier for the bill. It is generated by the biller. Also called as billNumber. Not applicable where there is no bill. | 69a1fbc0-b5d1-4cbf-ac6d-c4244e3e7e0c | String          |
| billerId:       | Unique identifier (Biller ID in BBPS) allocated to the Biller                                                                    | MAHI00000NATIC                       | String          |
| billerName:     | Name of the biller as registered with BBPS                                                                                       | Mahindra Rural Housing Finance Ltd   | String          |
| billerCategory: | Category of the biller as registered with BBPS. There are more than 25 biller categories.                                        | Loan-Repayment                       | String          |
| sessionId:      | Unique identifier for the session used for this request                                                                          | 7f6de02a-0061-403f-bd65-47d4b5f72c87 | String          |
| event:          | Name of the event to identify this user event                                                                                    | bill_fetch_failure                   | String          |
| fetchErrorCode: | Error codes for the failure                                                                                                      | ERR001                               | String          |
| error:          | Error array containing details of the error                                                                                      |                                      |                 |
| code:           | Error code                                                                                                                       | ERR001                               | String          |
| message:        | Error description                                                                                                                | Unable to get details                | String          |

<br/>

##### Sample payload

<CodeBlockWithCopy language="json">
  {`{
  "mobileNumber": "9481773053",
  "status": "FETCH_FAILURE",
  "billId": "69a1fbc0-b5d1-4cbf-ac6d-c4244e3e7e0c",
  "billerId": "MAHI00000NATIC",
  "billerName": "Mahindra Rural Housing Finance Ltd",
  "billerCategory": "Loan-Repayment",
  "sessionId": "7f6de02a-0061-403f-bd65-47d4b5f72c87",
  "event": "bill_fetch_failure",
  "fetchErrorCode": "ERR001",
  "error": {
    "code": "ERR001",
    "message": "Unable to get details"
  }
}`}
</CodeBlockWithCopy>

<hr class="primary" />

`bill_payment_success`

##### Parameters table

| Parameter       | Description                                                                                                                      | Example                               | Data Type       |
| --------------- | -------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------- | --------------- |
| txnId:          | Unique identifier for the transaction generated by COU, here Setu. Also known as BBPS transaction ID.                            | AXO101557980,                         | String          |
| mobileNumber:   | Mobile number used to generate the bill-payment request                                                                          | 9481773053,                           | String (Number) |
| status:         | Status of the bill-payment request                                                                                               | PAYMENT_SUCCESS,                      | String          |
| billId:         | Unique identifier for the bill. It is generated by the biller. Also called as billNumber. Not applicable where there is no bill. | dfeeaf14-e43a-4196-90d0-41089e979ad5, | String          |
| billerId:       | Unique identifier (Biller ID in BBPS) allocated to the Biller                                                                    | MAHI00000NATIC,                       | String          |
| billerName:     | Name of the biller as registered with BBPS                                                                                       | Mahindra Rural Housing Finance Ltd,   | String          |
| billerCategory: | Category of the biller as registered with BBPS. There are more than 25 biller categories.                                        | Loan-Repayment,                       | String          |
| sessionId:      | Unique identifier for the session used for this request                                                                          | 7f6de02a-0061-403f-bd65-47d4b5f72c87, | String          |
| billAmount:     | Amount of the bill in rupees (INR)                                                                                               | 601.75                                | String (Number) |
| dueDate:        | Due date of the bill. Format is YYYY-MM-DD.                                                                                      | 2021-05-23,                           | String (Date)   |
| amountPaid:     | Amount paid by the user in rupees (INR). This is especially applicable for billers where there is no billAmount, eg. Fastag      | 601.75                                | String (Number) |
| orderId:        | Unique identifier for a payment request. Generated by Setu.                                                                      | H001234566666,                        | String          |
| event:          | Name of the event to identify this user event                                                                                    | bill_payment_success                  | String          |

<br/>

##### Sample payload

<CodeBlockWithCopy language="json">
  {`{
  "txnId": "AXO101557980",
  "mobileNumber": "9481773053",
  "status": "PAYMENT_SUCCESS",
  "billId": "dfeeaf14-e43a-4196-90d0-41089e979ad5",
  "billerId": "MAHI00000NATIC",
  "billerName": "Mahindra Rural Housing Finance Ltd",
  "billerCategory": "Loan-Repayment",
  "sessionId": "7f6de02a-0061-403f-bd65-47d4b5f72c87",
  "billAmount": "105.0",
  "dueDate": "2021-05-23",
  "amountPaid": "601.00",
  "orderId": "H001234566666",
  "event": "bill_payment_success"
}`}
</CodeBlockWithCopy>

<hr class="primary" />

`bill_payment_failure`

##### Parameters table

| Parameter       | Description                                                                                                                      | Example                               | Data Type       |
| --------------- | -------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------- | --------------- |
| txnId:          | Unique identifier for the transaction generated by COU, here Setu. Also known as BBPS transaction ID.                            | AX0101557980,                         | String          |
| mobileNumber:   | Mobile number used to generate the bill-payment request                                                                          | 9481773053,                           | String (Number) |
| status:         | Status of the bill-payment request                                                                                               | PAYMENT_FAILED,                       | String          |
| billId:         | Unique identifier for the bill. It is generated by the biller. Also called as billNumber. Not applicable where there is no bill. | dfeeaf14-e43a-4196-90d0-41089e979ad5, | String          |
| billerId:       | Unique identifier (Biller ID in BBPS) allocated to the Biller                                                                    | MAHI00000NATIC,                       | String          |
| billerName:     | Name of the biller as registered with BBPS                                                                                       | Mahindra Rural Housing Finance Ltd,   | String          |
| billerCategory: | Category of the biller as registered with BBPS. There are more than 25 biller categories.                                        | Loan-Repayment,                       | String          |
| sessionId:      | Unique identifier for the session used for this request                                                                          | 7f6de02a-0061-403f-bd65-47d4b5f72c87, | String          |
| billAmount:     | Amount of the bill in rupees (INR)                                                                                               | 101.55                                | String (Number) |
| dueDate:        | Due date of the bill. Format is YYYY-MM-DD.                                                                                      | 2021-05-23,                           | String (Date)   |
| amountPaid:     | Amount paid by the user in rupees (INR). This is applicable for billers where there is no bill generated, eg. Fastag             | 601.00,                               | String (Number) |
| event:          | Name of the event to identify this user event                                                                                    | bill_payment_failure                  | String          |


<br/>

##### Sample payload

<CodeBlockWithCopy language="json">
  {`{
  "txnId": "AXO101557980",
  "mobileNumber": "9481773053",
  "status": "PAYMENT_FAILED",
  "billId": "dfeeaf14-e43a-4196-90d0-41089e979ad5",
  "billerId": "MAHI00000NATIC",
  "billerName": "Mahindra Rural Housing Finance Ltd",
  "billerCategory": "Loan-Repayment",
  "sessionId": "7f6de02a-0061-403f-bd65-47d4b5f72c87",
  "billAmount": "105.0",
  "dueDate": "2021-05-23",
  "amountPaid": "601.00",
  "event": "bill_payment_failure"
}`}
</CodeBlockWithCopy>

<hr class="primary" />

`bill_collection_failure`

##### Parameters table

| Parameter       | Description                                                                                                                                        | Example                               | Data Type       |
| --------------- | -------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------- | --------------- |
| txnId:          | Unique identifier for the transaction generated by COU. Not generated here because Setu does not post the bill-payment request to BBPS.            | AX0101557980,                         | String          |
| mobileNumber:   | Mobile number used to generate the bill-payment request                                                                                            | 9481773053,                           | String (Number) |
| status:         | Status of the bill-payment request                                                                                                                 | COLLECTION_FAILURE,                   | String          |
| billId:         | Unique identifier for the bill. It is generated by the biller. Also called as billNumber. Not applicable where there is no bill.                   | dfeeaf14-e43a-4196-90d0-41089e979ad5, | String          |
| billerId:       | Unique identifier (Biller ID in BBPS) allocated to the Biller                                                                                      | MAHI00000NATIC,                       | String          |
| billerName:     | Name of the biller as registered with BBPS                                                                                                         | Mahindra Rural Housing Finance Ltd,   | String          |
| billerCategory: | Category of the biller as registered with BBPS. There are more than 25 biller categories.                                                          | Loan-Repayment,                       | String          |
| customerId:     | Setu generated ID for customer                                                                                                                     | 9CBV4C9MSURWXRM54Q3DY8WEE,            | String          |
| billAmount:     | Amount of the bill in rupees (INR)                                                                                                                 | 101.55                                | String (Number) |
| dueDate:        | Due date of the bill. Format is YYYY-MM-DD.                                                                                                        | 2021-05-23,                           | String (Date)   |
| sessionId:      | Unique identifier for the session used for this request                                                                                            | 7f6de02a-0061-403f-bd65-47d4b5f72c87, | String          |
| amountPaid:     | Amount paid by the user in rupees (INR). This is applicable for billers where there is no bill generated, eg. Fastag. Will be null for this event. | 601.00,                               | String (Number) |
| amount:         |                                                                                                                                                    | null,                                 |                 |
| event:          | Name of the event to identify this user event                                                                                                      | bill_collection_failure               | String          |

<br/>

##### Sample payload

<CodeBlockWithCopy language="json">
  {`{
  "txnId": null,
  "mobileNumber": "9481773053",
  "status": "COLLECTION_FAILURE",
  "billId": "dfeeaf14-e43a-4196-90d0-41089e979ad5",
  "billerId": "MAHI00000NATIC",
  "billerName": "Mahindra Rural Housing Finance Ltd",
  "billerCategory": "Loan-Repayment",
  "customerId": "9CBV4C9MSURWXRM54Q3DY8WEE",
  "billAmount": "105.0",
  "dueDate": "2021-05-23",
  "sessionId": "7f6de02a-0061-403f-bd65-47d4b5f72c87",
  "amountPaid": 601.00,
  "amount": null,
  "event": "bill_collection_failure"
}`}
</CodeBlockWithCopy>

<hr class="primary" />

`bill_payment_refunded`


##### Parameters table

| Parameter       | Description                                                                                                          | Example                               | Data Type       |
| --------------- | -------------------------------------------------------------------------------------------------------------------- | ------------------------------------- | --------------- |
| txnId:          | Unique identifier for the transaction generated by COU.                                                              | AX0101557980,                         | String          |
| mobileNumber:   | Mobile number used to generate the bill-payment request                                                              | 9481773053,                           | String (Number) |
| status:         | Status of the bill-payment request                                                                                   | PAYMENT_REFUNDED,                     | String          |
| billId:         | Unique identifier for the bill. It is generated by the biller. Also called as billNumber                             | dfeeaf14-e43a-4196-90d0-41089e979ad5, | String          |
| billerId:       | Unique identifier (Biller ID in BBPS) allocated to the Biller                                                        | MAHI00000NATIC,                       | String          |
| billerName:     | Name of the biller as registered with BBPS                                                                           | Mahindra Rural Housing Finance Ltd,   | String          |
| billerCategory: | Category of the biller as registered with BBPS. There are more than 25 biller categories.                            | Loan-Repayment,                       | String          |
| sessionId:      | Unique identifier for the session used for this request                                                              | 7f6de02a-0061-403f-bd65-47d4b5f72c87, | String          |
| billAmount:     | Amount of the bill in rupees (INR)                                                                                   | 601.00,                               | String (Number) |
| dueDate:        | Due date of the bill. Format is YYYY-MM-DD.                                                                          | 2021-05-23,                           | String (Date)   |
| orderId:        | Unique identifier for a payment request. Generated by Setu.                                                          | H001234566666,                        | String          |
| amountPaid:     | Amount paid by the user in rupees (INR). This is applicable for billers where there is no bill generated, eg. Fastag | 601.00,                               | String (Number) |
| event:          | Status to identify this user event                                                                                   | bill_payment_refunded                 | String          |

<br/>

##### Sample payload

<CodeBlockWithCopy language="json">
  {`{
  "txnId": "AXO101557980",
  "mobileNumber": "9481773053",
  "status": "PAYMENT_REFUNDED",
  "billId": "dfeeaf14-e43a-4196-90d0-41089e979ad5",
  "billerId": "MAHI00000NATIC",
  "billerName": "Mahindra Rural Housing Finance Ltd",
  "billerCategory": "Loan-Repayment",
  "sessionId": "7f6de02a-0061-403f-bd65-47d4b5f72c87",
  "billAmount": "105.0",
  "dueDate": "2021-05-23",
  "orderId": "H001234566666",
  "amountPaid": "601.00",
  "event": "bill_payment_refunded"
}`}
</CodeBlockWithCopy>

<hr class="primary" />

`dispute_raised`

##### Parameters table

| Parameter     | Description                                                                                           | Example                                     | Data Type       |
| ------------- | ----------------------------------------------------------------------------------------------------- | ------------------------------------------- | --------------- |
| txnId:        | Unique identifier for the transaction generated by COU, here Setu. Also known as BBPS transaction ID. | AX0198058515,                               | String          |
| txnDate:      | Date of the transaction. Format is YYYY-MM-DD.                                                        | 2021-06-24,                                 | String (Date)   |
| issueType:    |                                                                                                       | 1,                                          | String          |
| description:  | Description as entered by the user.                                                                   | Message entered by the user                 | String          |
| mobileNumber: | Mobile number used to generate the dispute                                                            | 8971302465,                                 | String (Number) |
| referenceId:  | Unique identifer for the dispute raised, generated by Setu.                                           | ksyTnYVLor/YQ6IRBxzbYp88LuknxVT/2021-06-24, | String          |
| status:       | Status of the dispute                                                                                 | submitted,                                  | String          |
| event:        | Status to identify this user event                                                                    | dispute_raised                              | String          |

<br/>

##### Sample payload

<CodeBlockWithCopy language="json">
  {`{
  "txnId": "AXO198058515",
  "txnDate": "2021-06-24",
  "issueType": "1",
  "description": "What the customer tells the issue is",
  "mobileNumber": "8971302465",
  "referenceId": "ksyTnYVLor/YQ6IRBxzbYp88LuknxVT/2021-06-24",
  "status": "submitted",
  "event": "dispute_raised"
}`}
</CodeBlockWithCopy>

<hr class="primary" />

`dispute_status_change`

##### Parameters table

| Parameter     | Description                                                                                           | Example                                     | Data Type       |
| ------------- | ----------------------------------------------------------------------------------------------------- | ------------------------------------------- | --------------- |
| txnId:        | Unique identifier for the transaction generated by COU, here Setu. Also known as BBPS transaction ID. | AX0198058515,                               | String          |
| txnDate:      | Date of the transaction. Format is YYYY-MM-DD.                                                        | 2021-06-24,                                 | String (Date)   |
| issueType:    |                                                                                                       | 1,                                          | String          |
| description:  | Description as entered by the user.                                                                   | Message entered by the user                 | String          |
| mobileNumber: | Mobile number used to generate the dispute                                                            | 8971302465,                                 | String (Number) |
| referenceId:  | Unique identifer for the dispute raised, generated by Setu.                                           | ksyTnYVLor/YQ6IRBxzbYp88LuknxVT/2021-06-24, | String          |
| status:       | Status of the dispute                                                                                 | closed/unknown,                             | String          |
| event:        | Status to identify this user event                                                                    | dispute_status_change                       | String          |

<br/>

##### Sample payload

<CodeBlockWithCopy language="json">
  {`{
  "txnId": "AXO198058515",
  "txnDate": "2021-06-24",
  "issueType": "1",
  "description": "What the customer tells the issue is",
  "mobileNumber": "8971302465",
  "referenceId": "ksyTnYVLor/YQ6IRBxzbYp88LuknxVT/2021-06-24",
  "status": "closed/unknown",
  "event": "dispute_status_change"
}`}
</CodeBlockWithCopy>

<WasPageHelpful />
