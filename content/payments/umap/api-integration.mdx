---
sidebar_title: API integration
page_title: UMAP - API integration
order: 2
visible_in_sidebar: true
---

## API integration guide

Once you get the `clientID` and `secret` from Setu, use them to generate tokens to authorise all API requests.

<hr class="primary" />

#### Generate access token

An API to generate access tokens, which are used to authorise any other API requests made to Setu.

**Request**

<table>
    <tr>
        <th>Staging host</th>
        <td>
            <code>https://accountservice-dev.setu.co</code>
        </td>
    </tr>
    <tr>
        <th>Method</th>
        <td>
            <code>POST</code>
        </td>
    </tr>
    <tr>
        <th>Path</th>
        <td>
            <code>/v1/users/login</code>
        </td>
    </tr>
    <tr>
        <th>Header</th>
        <td>
            <code>client</code>â€” will be <code>bridge</code>
            <br />
            <code>Content-Type</code>â€” will be <code>application/json</code>
        </td>
    </tr>
</table>

<br />

**Request body**

<CodeBlockWithCopy language="json">
    {`{
  "clientID": "client_id",
  "secret": "client_secret",
  "grant_type": "client_credentials"
}`}
</CodeBlockWithCopy>

**Response**

<CodeBlockWithCopy language="json">
    {`{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2Nlc3NfdG9rZW4iOiJhY2Nlc3NfdG9rZW4iLCJyZWZyZXNoX3Rva2VuIjoic3RyaW5nIn0.HfoWXjOPViPG0BWnZ7ZGahD9UXacsjl9vrYXVIHOcW8",
  "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2Nlc3NfdG9rZW4iOiJhY2Nlc3NfdG9rZW4iLCJyZWZyZXNoX3Rva2VuIjoicmVmcmVzaF90b2tlbiJ9.67LNOUvWYtrxIELorznd4WUHqvjW3cOG1_dKs1BB9w8"
}`}
</CodeBlockWithCopy>

<Callout type="tip">
    ðŸ’¡ The <code>access_token</code> is valid for 5 minutes.
</Callout>

<br/>

###### How to use the access token

-   Once you have a valid token, you can use it to authorise an API calls made to Setu, by setting the `authorization` request header as `Bearer <token-value>`.
-   Store the `refresh_token` and use it to get the new access token before it expires.

<hr class="primary" />

#### Refresh access token

<p>
    <strong>Before expiry</strong>, use the stored <code>refresh_token</code>{" "}
    from the previous step to get the new <code>access_token</code>.
</p>

**Request**

<table>
    <tr>
        <th>Staging host</th>
        <td>
            <code>https://accountservice-dev.setu.co</code>
        </td>
    </tr>
    <tr>
        <th>Method</th>
        <td>
            <code>POST</code>
        </td>
    </tr>
    <tr>
        <th>Path</th>
        <td>
            <code>/v1/refresh</code>
        </td>
    </tr>
    <tr>
        <th>Header</th>
        <td>
            <code>client</code>â€” will be <code>bridge</code>
            <br />
            <code>Content-Type</code>â€” will be <code>application/json</code>
        </td>
    </tr>
</table>

<br />

**Request body**

<CodeBlockWithCopy language="json">
    {`{
  "refresh_token": "string"
}`}
</CodeBlockWithCopy>

**Response**

<CodeBlockWithCopy language="json">
    {`{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2Nlc3NfdG9rZW4iOiJhY2Nlc3NfdG9rZW4iLCJyZWZyZXNoX3Rva2VuIjoic3RyaW5nIn0.HfoWXjOPViPG0BWnZ7ZGahD9UXacsjl9vrYXVIHOcW8",
  "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2Nlc3NfdG9rZW4iOiJhY2Nlc3NfdG9rZW4iLCJyZWZyZXNoX3Rva2VuIjoicmVmcmVzaF90b2tlbiJ9.67LNOUvWYtrxIELorznd4WUHqvjW3cOG1_dKs1BB9w8"
}`}
</CodeBlockWithCopy>

<Callout type="tip">
    ðŸ’¡ <strong>After expiry</strong>, use the <code>Generate Access Token</code>{" "}
    API to get the new token.
</Callout>

<hr class="primary" />

#### Proceed with integration

<Row>
    <Portion desktopSpan="half">
        <Card padding="small" shape="rounded">
            <Link href="/payments/umap/api-integration/merchants">
                Merchants
            </Link>
            <p>Integrate as a merchant to start accepting payments over UPI.</p>
        </Card>
    </Portion>
    <Portion desktopSpan="half">
        <Card padding="small" shape="rounded">
            <Link href="/payments/umap/api-integration/aggregators">
                Aggregators
            </Link>
            <p>Integrate as an aggregator, to on-board and manage multiple merchants.</p>
        </Card>
    </Portion>
</Row>

<WasPageHelpful />
