---
sidebar_title: Auto Fetch Flow
page_title: Account Aggregator Auto Fetch flow
order: 4
visible_in_sidebar: true
---

## Auto Fetch flow

The Auto-Fetch data feature simplifies the process of fetching financial institution (FI) data after consent approval.
With this feature, developers can streamline the data retrieval process, saving time and effort.


### Overview

The Auto-Fetch data feature automates the steps required to fetch FI data after consent approval.
Traditionally, developers had to create a data session, listen to notifications, and manually manage data retrieval. With Auto-Fetch Data enabled, these tasks are handled automatically by the Setu system.

### Workflow

The workflow for the Auto-Fetch Data feature can be summarized as follows:

1. **Consent Approval**:
When a customer approves consent, this triggers the Auto-Fetch Data process.

2. **Automatic Data Session Creation**:
Setu, our API system, automatically creates a data session in response to the approved consent.

3. **Notification Monitoring and Retries**:
Setu continuously monitors notifications from financial institutions.
It also manages retries in case of failures or errors during the data retrieval process.

4. **Data Retrieval**:
Once the combined data session status reaches either PARTIAL or COMPLETED, Setu initiates the process of fetching FI data.

5. **Data Transmission**:
The fetched FI data is transmitted to the Financial Institution User (FIU) through the notification endpoint configured by the FIU.

<MainImage
    src="https://setu-fiu-resources.s3.ap-south-1.amazonaws.com/fiu-logos/workflow.png"
    alt="AA auto fetch"
/>

### Notification Payload:
- If the data from FIP is successfully fetched, the following notification is sent to the FIU:

<CodeBlockWithCopy language="json">
    {`POST /<your-webhook-endpoint>
    {
  "type": "FI_DATA_READY",
  "consentId": "58180119-15bc-454f-83bb-192efda9321b",
  "dataRange": {
    "from": "2023-07-25T11:27:01.069Z",
    "to": "2023-07-25T11:28:00.648Z"
  },
  "fiData": [
    {
      "fipID": "setu-fip",
      "data": [
        {
          "linkRefNumber": "4b4cc8fb-89eb-41c3-bc64-fec2497d5454",
          "maskedAccNumber": "XXXXXXXX7561",
          "decryptedFI": {
            "account": {
              "linkedAccRef": "4b4cc8fb-89eb-41c3-bc64-fec2497d5454",
              "maskedAccNumber": "XXXXXXXX7561",
              "type": "deposit",
              "version": "1.1",
              "profile": {
                "holders": {
                  "type": "SINGLE",
                  "holder": [
                    {
                      "address": "758, Das Nagar Bikaner 455148",
                      "ckycCompliance": "false",
                      "dob": "1983-09-08",
                      "email": "buchzain@setu-dummy.com",
                      "mobile": "3536459776",
                      "name": "Tushar Balakrishnan",
                      "nominee": "REGISTERED",
                      "pan": "SMPXE2207K"
                    }
                  ]
                }
              },
              "transactions": {
                "startDate": "2020-04-01T00:00:00.000Z",
                "endDate": "2023-01-01T00:00:00.000Z",
                "transaction": [
                  {
                    "amount": "33834.65",
                    "currentBalance": "489971.1",
                    "mode": "UPI",
                    "narration": "UPI/CR/457233689286/Gatik Yohannan/CZBR/64321752",
                    "reference": "966712146",
                    "transactionTimestamp": "2020-05-08T11:05:29+00:00",
                    "txnId": "EUCE23840883221703",
                    "type": "CREDIT",
                    "valueDate": "2020-05-09T11:05:29+00:00"
                  },
                  {
                    "amount": "16480.04",
                    "currentBalance": "408905.24",
                    "mode": "UPI",
                    "narration": "UPI/CR/988357930370/Dhruv Desai/RZJF/85716960",
                    "reference": "510260839",
                    "transactionTimestamp": "2020-12-16T21:49:14+00:00",
                    "txnId": "ZJGE96715479740775",
                    "type": "CREDIT",
                    "valueDate": "2020-12-17T21:49:14+00:00"
                  }
                  .........
                ]
              }
            }
          }
    
`}
</CodeBlockWithCopy>


- In case of any errors or failures in fetching the FI data, the following payload is sent:

<CodeBlockWithCopy language="json">
    {`POST /<your-webhook-endpoint>
{
    "type": "FI_DATA_FAILURE",
    "timestamp": "2023-08-28T17:12:51.521Z",
    "consentId": "af43608a-ed6e-4c65-9745-0386ba5fd91b",
    "success": true,
    "data": null,
    "error": {
        "code": "DataFetchFailure",
        "message": "Failed to fetch data after multiple retry attempts due to upstream errors"
    }
}
    `}
</CodeBlockWithCopy>
<WasPageHelpful />